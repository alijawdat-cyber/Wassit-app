# 📋 خطة تطوير تطبيق وسّط (Wassit) - مهام التنفيذ

> **خطة تفصيلية لتنفيذ المشروع مع 200+ مهمة موزعة على 15 مرحلة**

**التاريخ:** 24/05/2025  
**المشروع:** منصة وساطة رقمية عراقية  

---

## 🎯 ملخص سريع للحالة

- **✅ Phase 0:** مكتملة (100%) - التخطيط والوثائق
- **⚡ Phase 1:** شبه مكتملة (90%) - إعداد البيئة  
- **🔄 Phase 2:** جاري التنفيذ (44%) - إعداد Firebase
- **⏭️ Phase 3+:** قادم - التطوير الفعلي

**📝 للتفاصيل الكاملة راجع:**
- **[حالة المشروع](project_status.md)** - التقدم والوضع الحالي
- **[دليل الأدوات](../guides/development_tools_guide.md)** - استخدام أدوات التطوير  
- **[مؤشرات النجاح](success_metrics.md)** - معايير التقييم والنجاح
- **[المتطلبات](../setup/requirements_and_accounts.md)** - الحسابات والإعداد

---

## 📋 فهرس المراحل

- [المرحلة 0: التحضير والإعداد الأولي](#مرحلة-0-التحضير-والإعداد-الأولي) ✅
- [المرحلة 1: إعداد البيئة والمشروع](#مرحلة-1-إعداد-البيئة-والمشروع) ⚡
- [المرحلة 2: إعداد Firebase](#مرحلة-2-إعداد-firebase) 🔄
- [المرحلة 3: هيكل المشروع الأساسي](#مرحلة-3-هيكل-المشروع-الأساسي) ⏭️
- [المرحلة 4: تطوير نظام المصادقة](#مرحلة-4-تطوير-نظام-المصادقة) ⏭️
- [المرحلة 5: تطوير واجهات العميل](#مرحلة-5-تطوير-واجهات-العميل) ⏭️
- [المرحلة 6: تطوير واجهات مقدم الخدمة](#مرحلة-6-تطوير-واجهات-مقدم-الخدمة) ⏭️
- [المرحلة 7: تطوير Backend و APIs](#مرحلة-7-تطوير-backend-و-apis) ⏭️
- [المرحلة 8: نظام الرسائل والتواصل](#مرحلة-8-نظام-الرسائل-والتواصل) ⏭️
- [المرحلة 9: لوحة تحكم المشرف](#مرحلة-9-لوحة-تحكم-المشرف) ⏭️
- [المرحلة 10: نظام التسعير الديناميكي](#مرحلة-10-نظام-التسعير-الديناميكي) ⏭️
- [المرحلة 11: نظام الإشعارات](#مرحلة-11-نظام-الإشعارات) ⏭️
- [المرحلة 12: الاختبار والجودة](#مرحلة-12-الاختبار-والجودة) ⏭️
- [المرحلة 13: التحضير للنشر](#مرحلة-13-التحضير-للنشر) ⏭️
- [المرحلة 14: النشر والإطلاق](#مرحلة-14-النشر-والإطلاق) ⏭️

---

## مرحلة 0: التحضير والإعداد الأولي

### ✅ المهام التحضيرية
- [x] 0.1 تحليل الوثائق الفنية بالكامل
- [x] 0.2 إنشاء ملف TODO.md هذا 
- [x] 0.3 إعداد مجلد المشروع الرئيسي
- [x] 0.4 إنشاء README.md أولي للمشروع
- [x] 0.5 تحضير قائمة الأدوات والحسابات المطلوبة

**الهدف:** فهم كامل للمشروع وتحضير البيئة الأولية

**📊 التقدم:** 5/5 مهام مكتملة (100%) ✅ **مكتملة**

---

## مرحلة 1: إعداد البيئة والمشروع

### 🛠️ 1.1 التحقق من البيئة الحالية
- [x] 1.1.1 التحقق من تثبيت Flutter ✅ **Flutter 3.32.0 مثبت**
- [x] 1.1.2 التحقق من تثبيت Dart ✅ **Dart 3.8.0 مثبت**
- [x] 1.1.3 التحقق من Android Studio/VS Code ✅ **VS Code متوفر**
- [x] 1.1.4 التحقق من Node.js (للـ Firebase Functions) ✅ **Node.js 23.9.0 مثبت**
- [x] 1.1.5 تحديث كل الأدوات للإصدارات المطلوبة ✅ **محدثة**

### 🛠️ 1.2 تثبيت الأدوات المفقودة
- [x] 1.2.1 تثبيت Flutter 3.19+ إذا مفقود ✅ **مثبت 3.32.0**
- [x] 1.2.2 تثبيت Firebase CLI ✅ **مثبت 14.4.0**
- [x] 1.2.3 تثبيت FlutterFire CLI ✅ **مثبت 1.2.0**
- [🔄] 1.2.4 إعداد Android SDK 🔄 **Android Studio قيد التحميل**
- [x] 1.2.5 إعداد Xcode (لـ iOS) ✅ **Xcode 16.3 جاهز**
- [x] 1.2.6 تثبيت CocoaPods ✅ **مثبت**

### 🛠️ 1.3 إنشاء المشروع الأساسي
- [ ] 1.3.1 إنشاء مشروع Flutter جديد
- [ ] 1.3.2 إعداد pubspec.yaml مع كل الحزم المطلوبة
- [ ] 1.3.3 تشغيل flutter pub get
- [ ] 1.3.4 اختبار تشغيل المشروع على محاكي

**المتطلبات:**
- ✅ Flutter 3.19+ (مثبت 3.32.0)
- ✅ Dart 3.3+ (مثبت 3.8.0)
- ✅ Firebase CLI (مثبت 14.4.0)
- ✅ Android Studio أو VS Code (VS Code متوفر)

**📊 التقدم:** 9/10 مهام مكتملة (90%) - **شبه مكتملة** ⚡

---

## مرحلة 2: إعداد Firebase

### 🔥 2.1 إنشاء مشروع Firebase
- [x] 2.1.1 إنشاء حساب Google/Firebase ✅ **مكتمل**
- [x] 2.1.2 إنشاء مشروع Firebase جديد باسم "wassit-app" ✅ **مكتمل - ID: wassit-app-dca48**
- [x] 2.1.3 تفعيل Authentication ✅ **مفعل مع Phone Auth**
- [x] 2.1.4 تفعيل Firestore Database ✅ **مفعل في Test Mode**
- [⏸️] 2.1.5 تفعيل Storage ⏸️ **مؤجل - مشكلة فوترة**
- [ ] 2.1.6 تفعيل Cloud Functions
- [ ] 2.1.7 تفعيل Hosting (للوحة الإدارة)
- [x] 2.1.8 تفعيل Cloud Messaging ✅ **مفعل**

### 🔥 2.2 إعداد Authentication
- [x] 2.2.1 تفعيل Phone Authentication ✅ **مفعل**
- [x] 2.2.2 إضافة رقم هاتف للاختبار ✅ **+964 771 995 6000 مضاف**
- [ ] 2.2.3 إعداد SMS Provider (أو استخدام الاختبار)

### 🔥 2.3 إعداد Firestore
- [x] 2.3.1 إنشاء قاعدة البيانات في وضع الاختبار ✅ **مكتمل**
- [ ] 2.3.2 إعداد Collections الأساسية:
  - [ ] users
  - [ ] requests  
  - [ ] offers
  - [ ] orders
  - [ ] messages
  - [ ] notifications
  - [ ] reviews
  - [ ] system_settings
- [ ] 2.3.3 كتابة Firestore Rules الأمنية
- [ ] 2.3.4 إعداد Indexes المطلوبة

### 🔥 2.4 ربط Firebase بالتطبيق
- [ ] 2.4.1 تشغيل flutterfire configure ⚠️ **يحتاج Flutter project**
- [ ] 2.4.2 إضافة firebase_options.dart
- [ ] 2.4.3 تهيئة Firebase في main.dart
- [ ] 2.4.4 اختبار الاتصال

**الملفات المطلوبة:**
- firestore.rules
- firestore.indexes.json
- firebase_options.dart

**📊 التقدم:** 7/16 مهام مكتملة (44%) - **جاري التنفيذ**

**ملاحظة هامة:** 🔴 Firebase Storage مؤجل بسبب مشكلة بطاقة الائتمان العراقية، لكن يمكن المتابعة بالخدمات الأساسية

---

## مرحلة 3: هيكل المشروع الأساسي

### 📁 3.1 إنشاء هيكل المجلدات
- [ ] 3.1.1 إنشاء مجلد lib/core/
- [ ] 3.1.2 إنشاء مجلد lib/features/
- [ ] 3.1.3 إنشاء مجلد lib/config/
- [ ] 3.1.4 إنشاء المجلدات الفرعية حسب الهيكل المطلوب

### 📁 3.2 ملفات الثوابت الأساسية
- [ ] 3.2.1 إنشاء AppColors مع الألوان المطلوبة
- [ ] 3.2.2 إنشاء AppStrings مع النصوص العربية
- [ ] 3.2.3 إنشاء AppTheme مع خط Cairo
- [ ] 3.2.4 إنشاء AppDimensions للمقاسات
- [ ] 3.2.5 إنشاء AppAssets لمسارات الملفات

### 📁 3.3 الويدجت المشتركة
- [ ] 3.3.1 إنشاء AppButton المخصص
- [ ] 3.3.2 إنشاء AppTextField المخصص  
- [ ] 3.3.3 إنشاء LoadingIndicator
- [ ] 3.3.4 إنشاء CustomAppBar
- [ ] 3.3.5 إنشاء ErrorWidget المخصص

### 📁 3.4 إعداد التوجيه (Routing)
- [ ] 3.4.1 إنشاء AppRouter باستخدام go_router
- [ ] 3.4.2 تعريف كل المسارات المطلوبة
- [ ] 3.4.3 إعداد التوجيه المشروط (حسب نوع المستخدم)

**الملفات المطلوبة:**
- lib/core/constants/app_colors.dart
- lib/core/constants/app_strings.dart  
- lib/core/theme/app_theme.dart
- lib/config/router/app_router.dart

---

## مرحلة 4: تطوير نظام المصادقة

### 🔐 4.1 شاشة Splash
- [ ] 4.1.1 تصميم شاشة البداية مع الشعار
- [ ] 4.1.2 إضافة Animation للشعار
- [ ] 4.1.3 التحقق من حالة تسجيل الدخول
- [ ] 4.1.4 التوجيه للشاشة المناسبة

### 🔐 4.2 شاشة إدخال رقم الهاتف
- [ ] 4.2.1 تصميم واجهة إدخال رقم الهاتف
- [ ] 4.2.2 إضافة منسق الرقم العراقي (+964)
- [ ] 4.2.3 إضافة التحقق من صحة الرقم
- [ ] 4.2.4 ربط مع Firebase Auth لإرسال OTP

### 🔐 4.3 شاشة التحقق من OTP
- [ ] 4.3.1 تصميم شاشة إدخال 6 أرقام
- [ ] 4.3.2 إضافة Timer لإعادة الإرسال
- [ ] 4.3.3 التحقق من الرمز مع Firebase
- [ ] 4.3.4 معالجة الأخطاء (رمز خاطئ، انتهت الصلاحية)

### 🔐 4.4 شاشة اختيار نوع المستخدم
- [ ] 4.4.1 تصميم شاشة اختيار (عميل/مقدم خدمة)
- [ ] 4.4.2 حفظ نوع المستخدم في Firestore
- [ ] 4.4.3 إنشاء ملف المستخدم الأولي

### 🔐 4.5 Auth State Management
- [ ] 4.5.1 إنشاء AuthProvider مع Riverpod
- [ ] 4.5.2 إدارة حالة تسجيل الدخول
- [ ] 4.5.3 إعداد الـ Guards للصفحات المحمية

**الشاشات المطلوبة:**
- splash_screen.dart
- phone_input_screen.dart  
- otp_verification_screen.dart
- user_type_selection_screen.dart

---

## مرحلة 5: تطوير واجهات العميل

### 👤 5.1 الصفحة الرئيسية للعميل
- [ ] 5.1.1 تصميم AppBar مخصص مع الترحيب
- [ ] 5.1.2 إضافة بطاقات الخدمات الأربعة:
  - [ ] تصوير (أزرق)
  - [ ] تصميم (بنفسجي)  
  - [ ] كتابة محتوى (برتقالي)
  - [ ] سوشيال ميديا (أخضر)
- [ ] 5.1.3 قسم "الطلبات النشطة"
- [ ] 5.1.4 Bottom Navigation مع 3 تبويبات

### 👤 5.2 شاشة إنشاء طلب جديد
- [ ] 5.2.1 نموذج مفصل لإنشاء الطلب:
  - [ ] عنوان الطلب (مطلوب)
  - [ ] وصف تفصيلي (مطلوب، 30 حرف كحد أدنى)
  - [ ] اختيار المدينة (قائمة منسدلة)
  - [ ] مستوى الأولوية (عادي/عاجل)
  - [ ] الموعد النهائي (اختياري)
  - [ ] رفع مرفقات (صور/ملفات)
- [ ] 5.2.2 التحقق من صحة البيانات
- [ ] 5.2.3 رفع الملفات لـ Firebase Storage
- [ ] 5.2.4 حفظ الطلب في Firestore

### 👤 5.3 شاشة طلباتي
- [ ] 5.3.1 TabView مع 3 تبويبات:
  - [ ] النشطة
  - [ ] المكتملة  
  - [ ] الملغية
- [ ] 5.3.2 عرض قائمة الطلبات مع الحالة
- [ ] 5.3.3 إمكانية الضغط لعرض التفاصيل

### 👤 5.4 شاشة العروض المستلمة
- [ ] 5.4.1 عرض العروض لطلب محدد
- [ ] 5.4.2 إخفاء هوية مقدم الخدمة
- [ ] 5.4.3 عرض السعر النهائي (مع الهامش)
- [ ] 5.4.4 خيارات قبول/رفض العرض
- [ ] 5.4.5 عرض مستويات العروض (أساسي/متقدم/مميز)

### 👤 5.5 شاشة الملف الشخصي
- [ ] 5.5.1 عرض معلومات المستخدم
- [ ] 5.5.2 التقييم وعدد الطلبات
- [ ] 5.5.3 خيارات التحكم:
  - [ ] تعديل الملف الشخصي
  - [ ] تغيير المدينة
  - [ ] إعدادات الإشعارات
  - [ ] المساعدة والدعم
  - [ ] تسجيل الخروج

**الشاشات المطلوبة:**
- client_home_screen.dart
- create_request_screen.dart
- my_requests_screen.dart  
- offers_received_screen.dart
- client_profile_screen.dart

---

## مرحلة 6: تطوير واجهات مقدم الخدمة

### 🔧 6.1 الصفحة الرئيسية لمقدم الخدمة  
- [ ] 6.1.1 Bottom Navigation مع 4 تبويبات:
  - [ ] الفرص المتاحة
  - [ ] عروضي
  - [ ] أعمالي النشطة
  - [ ] الملف الشخصي

### 🔧 6.2 شاشة الفرص المتاحة
- [ ] 6.2.1 عرض الطلبات المتاحة حسب مجال الخدمة
- [ ] 6.2.2 فلترة حسب:
  - [ ] نوع الخدمة
  - [ ] المدينة
  - [ ] مستوى الأولوية
- [ ] 6.2.3 عرض معلومات محدودة عن الطلب
- [ ] 6.2.4 إخفاء هوية العميل
- [ ] 6.2.5 زر "تقديم عرض"

### 🔧 6.3 شاشة تقديم عرض
- [ ] 6.3.1 نموذج تقديم العرض:
  - [ ] السعر المقترح
  - [ ] مدة التنفيذ (بالأيام)
  - [ ] وصف طريقة العمل
  - [ ] قائمة المخرجات المتوقعة
  - [ ] الشروط والأحكام
  - [ ] نماذج أعمال سابقة (اختياري)
- [ ] 6.3.2 إمكانية تقديم عروض متعددة (أساسي/متقدم/مميز)
- [ ] 6.3.3 حفظ العرض في Firestore

### 🔧 6.4 شاشة عروضي
- [ ] 6.4.1 TabView مع 4 حالات:
  - [ ] معلقة (قيد المراجعة)
  - [ ] مقبولة
  - [ ] مرفوضة
  - [ ] منتهية الصلاحية
- [ ] 6.4.2 عرض تفاصيل كل عرض
- [ ] 6.4.3 إمكانية تعديل العروض المعلقة

### 🔧 6.5 شاشة أعمالي النشطة
- [ ] 6.5.1 عرض المشاريع قيد التنفيذ
- [ ] 6.5.2 شريط التقدم لكل مشروع
- [ ] 6.5.3 عرض الموعد النهائي
- [ ] 6.5.4 إمكانية رفع المخرجات

### 🔧 6.6 شاشة ملف مقدم الخدمة
- [ ] 6.6.1 معلومات العمل:
  - [ ] اسم العمل/الشركة
  - [ ] نوع العمل (فردي/شركة/مستقل)
  - [ ] الخدمات المقدمة
  - [ ] ساعات العمل
- [ ] 6.6.2 الإحصائيات:
  - [ ] التقييم العام
  - [ ] عدد المشاريع المكتملة
  - [ ] متوسط وقت الاستجابة
  - [ ] نسبة إكمال المشاريع
- [ ] 6.6.3 معرض الأعمال (Portfolio)
- [ ] 6.6.4 الأرباح والمالية

**الشاشات المطلوبة:**
- provider_home_screen.dart
- opportunities_screen.dart
- submit_offer_screen.dart
- my_offers_screen.dart
- active_projects_screen.dart
- provider_profile_screen.dart

---

## مرحلة 7: تطوير Backend و APIs

### ⚙️ 7.1 إعداد Cloud Functions
- [ ] 7.1.1 إنشاء مجلد functions/
- [ ] 7.1.2 تثبيت dependencies مع TypeScript
- [ ] 7.1.3 إعداد هيكل المجلدات:
  - [ ] src/auth/
  - [ ] src/requests/
  - [ ] src/offers/
  - [ ] src/messaging/
  - [ ] src/notifications/
  - [ ] src/utils/

### ⚙️ 7.2 وظائف المصادقة
- [ ] 7.2.1 sendOtp() - إرسال رمز التحقق
- [ ] 7.2.2 verifyOtp() - التحقق من الرمز
- [ ] 7.2.3 createUser() - إنشاء ملف المستخدم
- [ ] 7.2.4 updateUserType() - تحديث نوع المستخدم

### ⚙️ 7.3 وظائف الطلبات
- [ ] 7.3.1 createRequest() - إنشاء طلب جديد
- [ ] 7.3.2 updateRequestStatus() - تحديث حالة الطلب
- [ ] 7.3.3 getAvailableRequests() - جلب الطلبات المتاحة
- [ ] 7.3.4 assignProvidersToRequest() - تحديد مقدمي الخدمة المناسبين

### ⚙️ 7.4 وظائف العروض
- [ ] 7.4.1 submitOffer() - تقديم عرض
- [ ] 7.4.2 processOffer() - معالجة العرض وحساب السعر النهائي
- [ ] 7.4.3 acceptOffer() - قبول عرض
- [ ] 7.4.4 rejectOffer() - رفض عرض

### ⚙️ 7.5 نظام التسعير الديناميكي
- [ ] 7.5.1 calculateFinalPrice() - حساب السعر النهائي
- [ ] 7.5.2 applyPricingRules() - تطبيق قواعد التسعير
- [ ] 7.5.3 calculateMargin() - حساب الهامش
- [ ] 7.5.4 applyDiscounts() - تطبيق الخصومات

### ⚙️ 7.6 Triggers والأحداث التلقائية
- [ ] 7.6.1 onRequestCreated - عند إنشاء طلب جديد
- [ ] 7.6.2 onOfferSubmitted - عند تقديم عرض
- [ ] 7.6.3 onOrderCreated - عند قبول عرض
- [ ] 7.6.4 onMessageSent - عند إرسال رسالة

**الملفات المطلوبة:**
- functions/src/index.ts
- functions/src/utils/pricing.ts
- functions/src/utils/validators.ts
- functions/package.json

---

## مرحلة 8: نظام الرسائل والتواصل

### 💬 8.1 فلترة الرسائل
- [ ] 8.1.1 إنشاء CommunicationFilter class
- [ ] 8.1.2 إضافة patterns للكشف عن:
  - [ ] أرقام الهواتف العراقية
  - [ ] عناوين الإيميل  
  - [ ] روابط وسائل التواصل
  - [ ] الكلمات المحظورة
- [ ] 8.1.3 استبدال المحتوى المحظور بـ [محذوف]
- [ ] 8.1.4 تسجيل المخالفات

### 💬 8.2 شاشة المحادثة
- [ ] 8.2.1 تصميم واجهة الدردشة
- [ ] 8.2.2 عرض الرسائل مع الفلترة
- [ ] 8.2.3 إمكانية إرسال نص ومرفقات
- [ ] 8.2.4 عرض حالة الرسالة (مرسل/مستلم/مقروء)
- [ ] 8.2.5 التحديث المباشر (Real-time)

### 💬 8.3 نظام التحذيرات
- [ ] 8.3.1 تسجيل المخالفات في Firestore
- [ ] 8.3.2 إرسال تحذيرات للمستخدمين
- [ ] 8.3.3 تعليق الحساب بعد 3 مخالفات
- [ ] 8.3.4 لوحة تحكم للمشرف لمراجعة المخالفات

### 💬 8.4 Cloud Functions للرسائل
- [ ] 8.4.1 sendMessage() - إرسال رسالة مع فلترة
- [ ] 8.4.2 detectViolation() - كشف المخالفات
- [ ] 8.4.3 handleViolation() - معالجة المخالفات
- [ ] 8.4.4 moderateMessage() - مراجعة الرسائل

**الشاشات المطلوبة:**
- chat_screen.dart
- message_input_widget.dart

---

## مرحلة 9: لوحة تحكم المشرف

### 🎛️ 9.1 الصفحة الرئيسية للوحة التحكم
- [ ] 9.1.1 إنشاء تطبيق ويب منفصل
- [ ] 9.1.2 Sidebar للتنقل بين الأقسام
- [ ] 9.1.3 إحصائيات سريعة:
  - [ ] إجمالي الطلبات
  - [ ] الطلبات النشطة  
  - [ ] إجمالي المستخدمين
  - [ ] الإيرادات الشهرية
- [ ] 9.1.4 النشاط الأخير

### 🎛️ 9.2 إدارة الطلبات
- [ ] 9.2.1 جدول بكل الطلبات
- [ ] 9.2.2 فلترة حسب الحالة والتاريخ
- [ ] 9.2.3 تفاصيل كل طلب
- [ ] 9.2.4 تغيير حالة الطلب
- [ ] 9.2.5 تحديد مقدمي الخدمة المناسبين

### 🎛️ 9.3 إدارة العروض
- [ ] 9.3.1 جدول بكل العروض
- [ ] 9.3.2 مراجعة العروض المقدمة
- [ ] 9.3.3 حساب السعر النهائي وإضافة الهامش
- [ ] 9.3.4 الموافقة/رفض العروض
- [ ] 9.3.5 إرسال العروض للعملاء

### 🎛️ 9.4 إدارة المستخدمين
- [ ] 9.4.1 قائمة كل المستخدمين
- [ ] 9.4.2 فلترة حسب النوع (عميل/مقدم خدمة)
- [ ] 9.4.3 عرض ملفات مقدمي الخدمات للموافقة
- [ ] 9.4.4 تعليق/إلغاء تعليق الحسابات
- [ ] 9.4.5 عرض تاريخ المخالفات

### 🎛️ 9.5 التقارير والمالية
- [ ] 9.5.1 تقارير الإيرادات
- [ ] 9.5.2 إحصائيات الاستخدام
- [ ] 9.5.3 تقارير الأداء
- [ ] 9.5.4 تصدير البيانات

### 🎛️ 9.6 إعدادات النظام
- [ ] 9.6.1 إعدادات التسعير:
  - [ ] الهوامش الافتراضية لكل خدمة
  - [ ] مضاعفات الأولوية
  - [ ] حدود الهامش
- [ ] 9.6.2 إعدادات التشغيل:
  - [ ] الموافقة التلقائية على مقدمي الخدمة
  - [ ] موافقة المشرف على العروض
  - [ ] مدة صلاحية الطلبات والعروض
- [ ] 9.6.3 إعدادات التواصل:
  - [ ] patterns المحظورة
  - [ ] عتبات التحذيرات

**الصفحات المطلوبة:**
- admin_dashboard_screen.dart
- requests_management_screen.dart
- offers_management_screen.dart
- users_management_screen.dart
- reports_screen.dart
- settings_screen.dart

---

## مرحلة 10: نظام التسعير الديناميكي

### 💰 10.1 قواعد التسعير الأساسية
- [ ] 10.1.1 PricingRule class مع المعاملات:
  - [ ] نوع الخدمة
  - [ ] الهامش الأساسي
  - [ ] مضاعفات الأولوية
  - [ ] خصومات الكمية
  - [ ] التعديلات الموسمية
- [ ] 10.1.2 حفظ القواعد في Firestore
- [ ] 10.1.3 واجهة المشرف لتعديل القواعد

### 💰 10.2 خوارزمية حساب السعر
- [ ] 10.2.1 calculateFinalPrice() مع كل المعاملات
- [ ] 10.2.2 تطبيق خصومات العملاء المميزين
- [ ] 10.2.3 تطبيق التعديلات الموسمية
- [ ] 10.2.4 ضمان البقاء ضمن الحدود (15%-50%)

### 💰 10.3 نظام العروض المتعددة
- [ ] 10.3.1 MultiOfferStrategy class
- [ ] 10.3.2 توليد 3 مستويات تلقائياً:
  - [ ] أساسي (سعر أقل، ميزات أقل)
  - [ ] متقدم (السعر المقترح)
  - [ ] مميز (سعر أعلى، ميزات إضافية)
- [ ] 10.3.3 عرض الخيارات للعميل

### 💰 10.4 نظام الحزم والباقات
- [ ] 10.4.1 ServiceBundle class
- [ ] 10.4.2 تعريف باقات مدمجة:
  - [ ] باقة التسويق الشاملة
  - [ ] باقة المحتوى المتكاملة  
  - [ ] باقة التصوير والتصميم
- [ ] 10.4.3 خصومات البكج
- [ ] 10.4.4 واجهة العميل لاختيار الباقات

**الملفات المطلوبة:**
- lib/core/services/pricing_service.dart
- functions/src/utils/pricing.ts
- functions/src/utils/bundle_manager.ts

---

## مرحلة 11: نظام الإشعارات

### 🔔 11.1 إعداد Firebase Cloud Messaging
- [ ] 11.1.1 تفعيل FCM في Firebase Console
- [ ] 11.1.2 إضافة FCM للتطبيق
- [ ] 11.1.3 طلب إذن الإشعارات من المستخدم
- [ ] 11.1.4 حفظ device tokens في Firestore

### 🔔 11.2 أنواع الإشعارات
- [ ] 11.2.1 إشعارات الطلبات:
  - [ ] طلب جديد لمقدمي الخدمة
  - [ ] الموافقة على الطلب للعميل
  - [ ] العروض الجديدة للعميل
- [ ] 11.2.2 إشعارات العروض:
  - [ ] قبول/رفض العرض لمقدم الخدمة
  - [ ] تحديثات الأسعار
- [ ] 11.2.3 إشعارات المشاريع:
  - [ ] بدء المشروع
  - [ ] رفع المخرجات
  - [ ] اقتراب الموعد النهائي
- [ ] 11.2.4 إشعارات المراسلة:
  - [ ] رسائل جديدة
  - [ ] تحذيرات المخالفات

### 🔔 11.3 إرسال الإشعارات
- [ ] 11.3.1 NotificationService class
- [ ] 11.3.2 قوالب الإشعارات بالعربي
- [ ] 11.3.3 إرسال للمستخدم الواحد
- [ ] 11.3.4 إرسال جماعي (حسب الفئة)
- [ ] 11.3.5 جدولة الإشعارات

### 🔔 11.4 إدارة الإشعارات في التطبيق
- [ ] 11.4.1 شاشة عرض الإشعارات
- [ ] 11.4.2 وضع علامة مقروء/غير مقروء
- [ ] 11.4.3 فلترة حسب النوع
- [ ] 11.4.4 إعدادات الإشعارات (تشغيل/إيقاف)

### 🔔 11.5 Cloud Functions للإشعارات
- [ ] 11.5.1 sendNotification() - إرسال إشعار
- [ ] 11.5.2 sendBulkNotifications() - إرسال جماعي
- [ ] 11.5.3 scheduleNotification() - جدولة
- [ ] 11.5.4 updateDeviceToken() - تحديث التوكن

**الملفات المطلوبة:**
- lib/core/services/notification_service.dart
- lib/features/notifications/
- functions/src/notifications/

---

## مرحلة 12: الاختبار والجودة

### 🧪 12.1 Unit Tests
- [ ] 12.1.1 اختبار وظائف التسعير
- [ ] 12.1.2 اختبار فلترة الرسائل
- [ ] 12.1.3 اختبار validation functions
- [ ] 12.1.4 اختبار state management
- [ ] 12.1.5 تحقيق تغطية 80%+

### 🧪 12.2 Integration Tests
- [ ] 12.2.1 اختبار تدفق تسجيل الدخول
- [ ] 12.2.2 اختبار إنشاء ومعالجة الطلبات
- [ ] 12.2.3 اختبار تقديم وقبول العروض
- [ ] 12.2.4 اختبار نظام المراسلة
- [ ] 12.2.5 اختبار الدفع والتقييم

### 🧪 12.3 Widget Tests  
- [ ] 12.3.1 اختبار شاشات المصادقة
- [ ] 12.3.2 اختبار نماذج إنشاء الطلبات
- [ ] 12.3.3 اختبار واجهات العرض
- [ ] 12.3.4 اختبار التنقل بين الشاشات

### 🧪 12.4 اختبار الأداء
- [ ] 12.4.1 قياس وقت تحميل الشاشات
- [ ] 12.4.2 اختبار استهلاك الذاكرة
- [ ] 12.4.3 اختبار سرعة APIs
- [ ] 12.4.4 اختبار الحمل على قاعدة البيانات

### 🧪 12.5 اختبار الأمان
- [ ] 12.5.1 فحص Firestore Rules
- [ ] 12.5.2 اختبار صلاحيات المستخدمين
- [ ] 12.5.3 فحص تسريب البيانات
- [ ] 12.5.4 اختبار فلترة المحتوى

### 🧪 12.6 اختبار UX/UI
- [ ] 12.6.1 اختبار على أجهزة مختلفة
- [ ] 12.6.2 اختبار الاستجابة (Responsive)
- [ ] 12.6.3 اختبار إمكانية الوصول
- [ ] 12.6.4 اختبار اللغة العربية وRTL

**الملفات المطلوبة:**
- test/ folder
- integration_test/ folder
- test_data/ samples

---

## مرحلة 13: التحضير للنشر

### 📦 13.1 إعداد بيئة الإنتاج
- [ ] 13.1.1 إنشاء مشروع Firebase للإنتاج
- [ ] 13.1.2 نقل البيانات والإعدادات
- [ ] 13.1.3 إعداد الأمان النهائي
- [ ] 13.1.4 تفعيل Analytics و Crashlytics

### 📦 13.2 إعداد Android
- [ ] 13.2.1 إنشاء keystore للتوقيع
- [ ] 13.2.2 إعداد app signing في Play Console
- [ ] 13.2.3 تحضير screenshots ووصف التطبيق
- [ ] 13.2.4 إعداد تصريحات الخصوصية

### 📦 13.3 إعداد iOS
- [ ] 13.3.1 إنشاء حساب Apple Developer
- [ ] 13.3.2 إعداد certificates و profiles
- [ ] 13.3.3 تحضير App Store Connect
- [ ] 13.3.4 إعداد screenshots للـ App Store

### 📦 13.4 تحضير لوحة الإدارة
- [ ] 13.4.1 build للويب
- [ ] 13.4.2 رفع على Firebase Hosting
- [ ] 13.4.3 إعداد domain مخصص
- [ ] 13.4.4 إعداد SSL certificate

### 📦 13.5 الوثائق النهائية
- [ ] 13.5.1 تحديث README.md
- [ ] 13.5.2 كتابة دليل المستخدم
- [ ] 13.5.3 دليل المشرف للوحة التحكم
- [ ] 13.5.4 سياسة الخصوصية وشروط الاستخدام

### 📦 13.6 إعداد SMS Gateway
- [ ] 13.6.1 التسجيل مع مزود SMS عراقي
- [ ] 13.6.2 إعداد APIs للـ OTP
- [ ] 13.6.3 اختبار الإرسال الفعلي
- [ ] 13.6.4 مراقبة التكاليف

**الملفات المطلوبة:**
- android/app/build.gradle (configured)
- ios/Runner.xcworkspace (configured)  
- privacy_policy.md
- terms_of_service.md

---

## مرحلة 14: النشر والإطلاق

### 🚀 14.1 النشر على Google Play
- [ ] 14.1.1 رفع APK/Bundle أول مرة
- [ ] 14.1.2 إعداد listing store
- [ ] 14.1.3 تحديد الفئة العمرية والمحتوى
- [ ] 14.1.4 نشر للاختبار الداخلي أولاً
- [ ] 14.1.5 النشر العام

### 🚀 14.2 النشر على App Store
- [ ] 14.2.1 رفع البناء عبر Xcode/Transporter
- [ ] 14.2.2 إعداد App Store listing
- [ ] 14.2.3 التقديم للمراجعة
- [ ] 14.2.4 الرد على ملاحظات Apple
- [ ] 14.2.5 النشر بعد الموافقة

### 🚀 14.3 إطلاق تجريبي محدود
- [ ] 14.3.1 دعوة 50 مستخدم للاختبار
- [ ] 14.3.2 جمع الملاحظات والبيانات
- [ ] 14.3.3 إصلاح المشاكل العاجلة
- [ ] 14.3.4 تحسين الأداء

### 🚀 14.4 الإطلاق الرسمي
- [ ] 14.4.1 حملة تسويقية أولية
- [ ] 14.4.2 التواصل مع المؤثرين
- [ ] 14.4.3 إعلانات مدفوعة محدودة
- [ ] 14.4.4 مراقبة الاستخدام والأخطاء

### 🚀 14.5 المتابعة بعد الإطلاق
- [ ] 14.5.1 مراقبة يومية للأخطاء
- [ ] 14.5.2 الرد على تقييمات المستخدمين
- [ ] 14.5.3 تجميع feedback للتحديث التالي
- [ ] 14.5.4 تحليل البيانات وتقييم الأداء

### 🚀 14.6 خطة التوسع
- [ ] 14.6.1 إضافة مدن عراقية جديدة
- [ ] 14.6.2 إضافة خدمات جديدة
- [ ] 14.6.3 تطوير نسخة الويب للعملاء
- [ ] 14.6.4 تطوير APIs للشركاء

---

## 📊 مؤشرات النجاح والمتابعة

### الأسبوع الأول:
- [ ] 100+ تحميل
- [ ] 50+ مستخدم مسجل  
- [ ] 10+ طلب مكتمل
- [ ] معدل الأعطال < 1%

### الشهر الأول:
- [ ] 500+ مستخدم نشط
- [ ] 100+ طلب مكتمل
- [ ] تقييم 4+ نجوم
- [ ] معدل الاحتفاظ 60%

### الشهر الثالث:
- [ ] 2000+ مستخدم
- [ ] 500+ طلب شهرياً
- [ ] توسع لمدينتين إضافيتين
- [ ] نقطة التعادل المالي

---

## 💡 ملاحظات مهمة للتنفيذ

1. **الأولوية:** البدء بالميزات الأساسية (MVP) قبل المتقدمة
2. **الاختبار:** اختبار كل ميزة فور تطويرها
3. **الأمان:** التركيز على حماية بيانات المستخدمين
4. **الأداء:** مراقبة الأداء في كل مرحلة
5. **التوثيق:** كتابة التوثيق مع كل feature

---

## 🔗 مراجع سريعة

- **📊 [حالة المشروع](project_status.md)** - تتبع التقدم والوضع الحالي
- **🛠️ [دليل الأدوات](../guides/development_tools_guide.md)** - استخدام أدوات التطوير  
- **📈 [مؤشرات النجاح](success_metrics.md)** - معايير التقييم والنجاح
- **⚙️ [المتطلبات](../setup/requirements_and_accounts.md)** - الحسابات والإعداد

---

**انتهى التخطيط الشامل لتطبيق وسّط**  
**عدد المهام الإجمالي:** 200+ مهمة مفصلة  
**المدة المتوقعة:** 10-12 أسبوع  

**📅 آخر تحديث:** 24 مايو 2025  
**🎯 المهمة التالية:** إنشاء مشروع Flutter وربط Firebase 